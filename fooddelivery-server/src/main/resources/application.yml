server:
  port: 8080

spring:
  profiles:
    active: dev
  main:
    allow-circular-references: true
  # Druid 数据源配置（使用 fooddelivery.datasource 配置）
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      driver-class-name: ${fooddelivery.datasource.driver-class-name}
      url: jdbc:mysql://${fooddelivery.datasource.host}:${fooddelivery.datasource.port}/${fooddelivery.datasource.database}?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true
      username: ${fooddelivery.datasource.username}
      password: ${fooddelivery.datasource.password}
      # 连接池配置
      initial-size: 5
      min-idle: 5
      max-active: 20
      max-wait: 60000
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query: SELECT 1
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
      # 连接泄漏检测
      remove-abandoned: true
      remove-abandoned-timeout: 1800
      log-abandoned: true
      # 监控统计
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*
        login-username: admin
        login-password: admin
      # Web 监控
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"

  redis:
    host: ${fooddelivery.redis.host}
    port: ${fooddelivery.redis.port}
    password: ${fooddelivery.redis.password}
    database: ${fooddelivery.redis.database}

mybatis:
  #mapper配置文件
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.fooddelivery.entity
  configuration:
    #开启驼峰命名
    map-underscore-to-camel-case: true

logging:
  level:
    com:
      fooddelivery:
        mapper: debug
        service: info
        controller: info
    # 添加 Druid 和 Spring Boot 数据源配置的日志
    com.alibaba.druid: DEBUG
    org.springframework.boot.autoconfigure.jdbc: DEBUG
    org.springframework.jdbc.datasource: DEBUG

fooddelivery:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    host: localhost
    port: 3306
    database: food_delivery_system
    username: root
    password: 1234
  jwt:
    # 设置jwt签名加密时使用的秘钥
    admin-secret-key: itcast
    # 设置jwt过期时间
    admin-ttl: 72000000
    # 设置前端传递过来的令牌名称
    admin-token-name: token

    user-secret-key: itcast
    user-ttl: 72000000
    user-token-name: authentication

#  alioss:
#    endpoint: ${fooddelivery.alioss.endpoint}
#    access-key-id: ${fooddelivery.alioss.access-key-id}
#    access-key-secret: ${fooddelivery.alioss.access-key-secret}
#    bucket-name: ${fooddelivery.alioss.bucket-name}

  wechat:
    appid: wxee9f76b2cdc37dc2
    secret: d65fc2cc6157dbab0204d5525b6fd02a